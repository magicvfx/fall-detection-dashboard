<!DOCTYPE html>
<html>
<head>
  <title>Fall Detection Alerts</title>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap" async defer></script>
  <style>
    #map { height: 500px; width: 100%; }
  </style>
</head>
<body>
  <h2>Fall & SOS Alerts</h2>
  <div id="map"></div>
  <div id="info"></div>

  <script>
    // Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyCoSb7TW3Wgz5zzWVajpk2l8DqFKYEK-3o",
      databaseURL: "https://fall-dectation-default-rtdb.firebaseio.com"
    };
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.database(app);

    let map, marker;

    function initMap() {
      map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: 11.247083, lng: 75.952417 },
        zoom: 15
      });
      marker = new google.maps.Marker({ map: map });
      
      db.ref("alerts").limitToLast(1).on("child_added", snap => {
        const data = snap.val();
        const pos = { lat: data.lat, lng: data.lng };
        marker.setPosition(pos);
        map.setCenter(pos);
        document.getElementById("info").innerHTML = `
          <b>Type:</b> ${data.type}<br>
          <b>Lat:</b> ${data.lat}<br>
          <b>Lng:</b> ${data.lng}<br>
          <b>Battery:</b> ${data.battery}V<br>
          <b>Time:</b> ${data.time}
        `;
      });
    }
  </script>
</body>
</html>

